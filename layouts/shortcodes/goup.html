<div class="div_goup" id="div_goup" style="position: fixed;bottom: 5em;right: 4%;margin-bottom: 1.2em;">
    <button id="goup" ontouchstart="" tabindex="1" onclick="topFunction()" style="display: none;">
        <svg class="svg-icon"
            style="width: 2em; height: 2em; vertical-align: middle; fill: currentColor; overflow: hidden;"
            viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M830.687738 603.071182c0 9.614985-3.933589 17.949814-11.799744 25.007557-7.867178 7.05672-17.222243 10.56052-28.065196 10.512425L232.716714 638.591163c-10.789741 0-20.144806-3.5038-28.064172-10.512425-7.919367-7.009647-11.852956-15.344476-11.799744-25.007557 0.053212-9.660011 3.986801-17.996886 11.799744-25.00551l279.05253-248.641917c7.867178-7.009647 17.22122-10.513448 28.065196-10.513448 10.842952 0 20.196994 3.504824 28.064172 10.513448l279.05253 248.641917C826.754149 585.074296 830.687738 593.411171 830.687738 603.071182z" fill="black"/>
        </svg>
    </button>
</div>

<script>

    var tim = 0;
    document.addEventListener("click", () => {
        document.documentElement.style.scrollBehavior = 'smooth';
    })

    document.addEventListener('DOMContentLoaded', () => {

        let goup = document.getElementById("goup");
        setTimeout(() => {goup.style.display = "block";}, 200);
        goup.onfocus = (e) => {
            tim = window.setTimeout(() => {e.preventDefault(); goup.blur();}, 1200);
        };

        window.onscroll = function () { scrollFunction() };

    })


    function scrollFunction() {
        document.documentElement.style.scrollBehavior = 'smooth';
        if (document.body.scrollTop > 1000 || document.documentElement.scrollTop > 1000 || window.scrollY > 1000) {
            goup.classList.add("add");
        } else {
            goup.classList.remove("add");
        }
    }

    function topFunction() {
        const y = document.getElementById("table-of-contents").offsetTop;
        const offset = document.querySelector(".sticky-header").offsetHeight;
        window.clearTimeout(tim);
        window.scrollTo({top:y-offset-10});
        window.location.hash = "#table-of-contents";
        setTimeout(() => {document.querySelector("#goup").blur();}, 600);
    }

</script>

<noscript>
    <link rel="stylesheet" href="{{ relURL "noscript_smooth.css" }}" crossorigin="anonymous">
    
    <div style="position: relative;">
        <a href="#">
            <button id="goup" style="position: fixed;bottom: 5%;right: 0px;margin-right: 5%;margin-bottom: 5em;border: 0.1em solid black;border-radius: 0.5em;">
                <svg class="svg-icon"
                    style="width: 2em; height: 2em; vertical-align: middle; fill: currentColor; overflow: hidden;"
                    viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M830.687738 603.071182c0 9.614985-3.933589 17.949814-11.799744 25.007557-7.867178 7.05672-17.222243 10.56052-28.065196 10.512425L232.716714 638.591163c-10.789741 0-20.144806-3.5038-28.064172-10.512425-7.919367-7.009647-11.852956-15.344476-11.799744-25.007557 0.053212-9.660011 3.986801-17.996886 11.799744-25.00551l279.05253-248.641917c7.867178-7.009647 17.22122-10.513448 28.065196-10.513448 10.842952 0 20.196994 3.504824 28.064172 10.513448l279.05253 248.641917C826.754149 585.074296 830.687738 593.411171 830.687738 603.071182z" fill="black"/>
                </svg>
            </button>
        </a>
    </div>
</noscript>
